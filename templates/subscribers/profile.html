{% load staticfiles %}
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="google-site-verification" content="1lnpzsLiFMIXB6anuuqEAR1jtrJCnOhsrwiz1pv_38w" />
<link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/apple-touch-icon-76x76.png' %}">
<link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/img/favicon.png' %}">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<link rel="icon" type="image/png" href="{% static 'assets/img/favicon.png'%}">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="description" content="Create and post Khalsaaid support photo on your Instagram">
<meta name="author" content="igapp.me">
<meta name="keywords" content="igapp, instagram, instagram app, khalsaaid instagam, khalsaaid, insta khalsaaid">
<meta property="og:title" content="Create and post Khalsaaid support photo on your Instagram" />
<meta property="og:url" content="https://khalsaaid.igapp.me" />
<meta property="og:description" content="Post a photo on your profile in support of KHALSAAID" />
<meta property="og:image" content="{% static 'assets/img/background/ambu.jpg' %}" />

<title>Create and post Khalsaaid support photo on your Instagram</title>

<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<meta name="viewport" content="width=device-width" />


<!-- Bootstrap core CSS     -->
<link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />

<!--  Paper Dashboard core CSS    -->
<link href="{% static 'assets/css/paper-dashboard.css' %}" rel="stylesheet"/>


<!--  CSS for Demo Purpose, don't include it in your project     -->
<link href="{% static 'assets/css/demo.css' %}" rel="stylesheet" />
<link href="{% static 'assets/css/cropper.min.css' %}" rel="stylesheet">



<!--  Fonts and icons     -->
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
<link href="{% static 'assets/css/themify-icons.css' %}" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-transparent navbar-absolute">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle navbar-toggle-black" data-toggle="collapse" data-target="#navigation-example-2">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar "></span>
<span class="icon-bar "></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="https://khalsaaid.igapp.me">SUPPORT KHALSAAID</a>

</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav navbar-right">
<li><a href="#">igapp.me</a></li>
</ul>
</div>
</div>
</nav>

<div class="wrapper wrapper-full-page">
<div class="full-page login-page" data-color="azure">
<!--   you can change the color of the filter page using: data-color="blue | azure | green | orange | red | purple" -->


<div class="content">
<div class="container-fluid">
<div class="row">

<div class="col-md-10 col-md-offset-1">
<div class="card card-user">
<div class="card-content">
<div class="author">
<div class="alert text-center" style="background: #2193b0;  /* fallback for old browsers */
background: -webkit-linear-gradient(to left, #6dd5ed, #2193b0);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to left, #6dd5ed, #2193b0); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
">
<span>
<div class="row">
<div class="col-sm-7">
<b>Post a photo in support of KHALSAAID on your Instagram!</b>
</div>
<div class="col-sm-5">
<button type="button" class="btn btn-wd btn-neutral" 
onclick="upload();">
<span class="btn-label">
<i class="ti-instagram"></i>
</span>Create Now!</button>
</div>
</span>
</div>
</div>

<div class="row">

<div class="col-sm-6">
<img  class="img-responsive" src="{{ latest_user.photoUrl }}" style="box-shadow:0 0 5px 5px white;" width="500px" height="500px"></img>
</div>


<div class="col-sm-6">

<div class="alert text-center" style="background: #FCB382;">
<span><b>Recent Users</b> </span>
</div>

{% for user in last_users %}
<div class="alert text-center" style="background: #FCB382;">
<span>
<div class="row">
<div class="col-xs-6">
<span class="ti-instagram"></span>
<b>/{{user.username}}</b> 
</div>
<div class="col-xs-6">
<img class="avatar" src="{{ user.dpUrl }}" width="50px" height="50px" alt="user"/></span>
</div>
</div>
</div>    
{% endfor %}
</div> 


</div>

</div>



</div>

</div>
</div>

</div>

<footer class="footer footer-transparent">
<div class="container">

</div>
</footer>
</div>
</div>
</body>


<!--   Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js' %}   -->
<script src="{% static 'assets/js/jquery-3.1.1.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/js/jquery-ui.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/js/perfect-scrollbar.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/js/bootstrap.min.js' %}" type="text/javascript"></script>

<!--  Forms Validations Plugin -->
<script src="{% static 'assets/js/jquery.validate.min.js' %}"></script>

<!-- Promise Library for SweetAlert2 working on IE -->
<script src="{% static 'assets/js/es6-promise-auto.min.js' %}"></script>

<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script src="{% static 'assets/js/moment.min.js' %}"></script>

<!--  Date Time Picker Plugin is included in this js file -->
<script src="{% static 'assets/js/bootstrap-datetimepicker.js' %}"></script>

<!--  Select Picker Plugin -->
<script src="{% static 'assets/js/bootstrap-selectpicker.js' %}"></script>

<!--  Switch and Tags Input Plugins -->
<script src="{% static 'assets/js/bootstrap-switch-tags.js' %}"></script>

<!-- Circle Percentage-chart -->
<script src="{% static 'assets/js/jquery.easypiechart.min.js' %}"></script>

<!--  Charts Plugin -->
<script src="{% static 'assets/js/chartist.min.js' %}"></script>

<!--  Notifications Plugin    -->
<script src="{% static 'assets/js/bootstrap-notify.js' %}"></script>

<!-- Sweet Alert 2 plugin -->
<script src="{% static 'assets/js/sweetalert2.js' %}"></script>

<!-- Vector Map plugin -->
<script src="{% static 'assets/js/jquery-jvectormap.js' %}"></script>

<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>

<!-- Wizard Plugin    -->
<script src="{% static 'assets/js/jquery.bootstrap.wizard.min.js' %}"></script>

<!--  Bootstrap Table Plugin    -->
<script src="{% static 'assets/js/bootstrap-table.js' %}"></script>

<!--  Plugin for DataTables.net  -->
<script src="{% static 'assets/js/jquery.datatables.js' %}"></script>

<!--  Full Calendar Plugin    -->
<script src="{% static 'assets/js/fullcalendar.min.js' %}"></script>

<!-- Paper Dashboard PRO Core javascript and methods for Demo purpose -->
<script src="{% static 'assets/js/paper-dashboard.js' %}"></script>
<script src="{% static 'assets/js/cropper.min.js' %}"></script>


<!-- Paper Dashboard PRO DEMO methods, don't include it in your project! -->
<script src="{% static 'assets/js/demo.js' %}"></script>


<script type="text/javascript">
$().ready(function(){
    upload();
		demo.checkFullPageBackgroundImage();

		setTimeout(function(){
				// after 1000 ms we add the class animated to the login/register card
				$('.card').removeClass('card-hidden');
				}, 700)
		});

function upload(){swal({
  
  html:
  	'<p>Enter your Instagram Username </p>'+'<img class="avatar border-white" src="{% static 'assets/img/faces/4.png' %}" alt="instagram"/>'+
    '<input type = "text" placeholder = "username" id="swal-input1" class="swal2-input" style="text-transform: lowercase;" required/>',
  focusConfirm: true,
  showCancelButton: true,
  confirmButtonText: 'Create',
  allowOutsideClick: false,
  allowEscapeKey: true,
  allowEnterKey: true,
  showLoaderOnConfirm: true,
 preConfirm: function () {
    return new Promise(function (resolve, reject) {
        setTimeout(function() {
      	   
        var username = $('#swal-input1').val();
        


       

             if (username === "") {
    reject("Usename can't be empty")
  }

  
  else {
	      console.log(username)
        $.ajax({
            url: "/subscribed",
            type: "POST",
            data: {
                username: $('#swal-input1').val(),
                
            },
            dataType: "json",


             
           success: function(resp){
            
            	if ("failed" === resp.mesg) {
                console.log(username)
			          reject("Please try later :(")
             }
              else if ("photofailed" === resp.mesg){
                 reject("Username not found :(") 
              }

              else if ("photosuccess" === resp.mesg){

                    var username = $('#swal-input1').val();        
                    var user_low = username.toLowerCase(); 
                                       swal({
                        title: 'Thanks for your Support',
                        type: 'success',
                        html:
                          'Hi @<b>'+user_low+'</b>, your photo created <b>successfully</b>',
                        showCloseButton: true,
                        showCancelButton: false,
                        focusConfirm: false,
                        confirmButtonText:
                          '<i class="fa fa-download"></i> Download',
                        confirmButtonAriaLabel: 'Download',
                        cancelButtonText:
                        '<i class="fa fa-times"></i> Cancel',
                        cancelButtonAriaLabel: 'Cancel',
                      }).then( function () {
                        window.location.href = 'media/uploaded_images/'+user_low+'.jpg';} )
              }

			         else {
                console.log('resolved')


                swal({
				  title: 'Welcome @' +username+ '!',
				  text: 'Just wait a second',
				  timer: 1000,
				  allowOutsideClick: false,
				  allowEscapeKey: false,

				  onOpen: function () {
				    swal.showLoading()
				  }
				}).then(
				  function () {
				  },
				  // handling the promise rejection
				  function (dismiss) {
				    if (dismiss === 'timer') {
				    	window.location.href = "google.com";

				      console.log('I was closed by the timer')
    }
  }
)
			          
              


			        }
 

            },
         
        });
    
        
    }  }, 2000)
    })
  },
  allowOutsideClick: false
})}
</script>

</html>

